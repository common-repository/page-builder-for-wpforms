rndefine("#RNPBHTMLGenerator",["exports","#RNPBCore/EventManager","lit"],(function(e,t,n){"use strict";class r{constructor(e,t={}){this.PageBuilder=e,this.Options=t}ParseContent(e,t,r=[]){var a;if(null==t)return null;for(let l of t)switch(l.type){case"paragraph":let t=this.CreateAndAppend(e,"p");null!=(null==l?void 0:l.attrs.align)&&(t.style.textAlign=l.attrs.align),this.ParseContent(t,l.content,r);break;case"icon":e.appendChild(n.renderInline(this.PageBuilder.MaybeGenerateIcon({Type:l.attrs.type,Value:l.attrs.value,Source:l.attrs.source})));break;case"text":this.ParseText(e,l);break;case"horizontal_rule":this.CreateAndAppend(e,"hr");break;case"heading":let s=l.attrs.level,o=this.CreateAndAppend(e,"h"+s);null!=(null==l?void 0:l.attrs.align)&&(o.style.textAlign=l.attrs.align),this.ParseContent(o,l.content,r);break;case"blockquote":let i=this.CreateAndAppend(e,"blockQuote");this.ParseContent(i,l.content,r);break;case"bullet_list":let d=this.CreateAndAppend(e,"ul");this.ParseContent(d,l.content,r);break;case"ordered_list":let c=this.CreateAndAppend(e,"ol");this.ParseContent(c,l.content,r);break;case"list_item":let p=this.CreateAndAppend(e,"li");this.ParseContent(p,l.content,r);break;case"table":let u=this.CreateAndAppend(e,"table"),h=this.CreateAndAppend(u,"tbody");this.ParseContent(h,l.content,r);break;case"table_row":let C=this.CreateAndAppend(e,"tr");this.ParseContent(C,l.content,r);break;case"table_cell":let b=this.CreateAndAppend(e,"td");this.ParseContent(b,l.content,r);break;case"field":let{id:k,type:A,path:m}=l.attrs,y=null===(a=this.PageBuilder.DataSource)||void 0===a?void 0:a.GetFriendlyName(k,m);""==y&&(y="Select a field");let f=document.createElement("span");f.innerText=y,"Select a field"==y&&(f.style.color="red"),f.style.padding="0 2px",f.style.border="1px solid #999",f.style.backgroundColor="#efefef",null!=l.marks&&(f=this.ApplyMarks(f,l.marks)),e.appendChild(f);break;default:if(null!=this.Options.NodeFormatter){let t=this.Options.NodeFormatter(l);null!=t&&e.appendChild(t);continue}console.error("Unknown type ",l)}return{Code:e,Fields:r}}CreateAndAppend(e,t){let n=document.createElement(t);return e.appendChild(n),n}ParseText(e,t){if(null==t.marks||0==t.marks.length){let n=document.createTextNode(t.text);return void e.appendChild(n)}let n=document.createElement("span");n.innerText=t.text,n=this.ApplyMarks(n,t.marks),e.appendChild(n)}ApplyMarks(e,t){for(let n of t)switch(n.type){case"strong":e.style.fontWeight="bold";break;case"em":e.style.fontStyle="italic";break;case"link":let t=document.createElement("a");t.href="#",t.target=n.attrs.target,t.appendChild(e),e=t;break;case"color":e.style.color=n.attrs.color;break;default:console.error("Undefined mark",n)}return e}}t.EventManager.Subscribe("GetHTML",(e=>{var t,n;let a=new r(e.FormBuilder,null!==(t=e.Options)&&void 0!==t?t:{}),l=document.createElement("div");return l.classList.add("rnHTML"),a.ParseContent(l,null===(n=e.HTML)||void 0===n?void 0:n.content)})),e.HTMLGenerator=r,Object.defineProperty(e,"__esModule",{value:!0})}));
