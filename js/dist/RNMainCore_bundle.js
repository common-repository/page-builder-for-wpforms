rndefine("#RNMainCore",(function(){"use strict";class e{constructor(){this.Subscribers=[]}Subscribe(e,t,r=10){Array.isArray(e)||(e=[e]),this.GetSubscriberByRef(e)||this.Subscribers.push({reference:e,callback:t,priority:r})}Unsubscribe(e){let t=this.GetSubscriberByRef(e);null!=t&&this.Subscribers.splice(this.Subscribers.indexOf(t),1)}GetSubscriberByRef(e){return Array.isArray(e)||(e=[e]),this.Subscribers.find((t=>t.reference.length==e.length&&t.reference.filter((t=>e.some((e=>e==t)))).length==t.reference.length))}Publish(e){let t=null;for(let r of this.Subscribers){let i=r.callback(e);void 0!==i&&(t=i)}return t}}class t{static SanitizeStringArray(e,r=!0){return null==e?[]:Array.isArray(e)?e:r?[]:[t.SanitizeString(e)]}static SanitizeString(e,t=""){return null==e||Array.isArray(e)||null==e.toString||"object"==typeof e?t:e.toString()}static GetValueFromPath(e,t,r=""){if(null==e)return r;let i="";for(;null!=(i=t.shift());){if(null==e[i])return r;e=e[i]}return e}static GetStringValueFromPath(e,r,i=""){let n=t.GetValueFromPath(e,r,null);return null==n?i:t.SanitizeString(n)}static SanitizeNumber(e,t=0){return null==e||Array.isArray(e)?t:(e=Number(e),isNaN(e)?t:e)}static SanitizeBoolean(e,t=!1){return null===e?t:"boolean"==typeof e?e:isNaN(Number(e))?t:0!=e}}class r{constructor(){this.IsDirty=!1,this.ValueChanged=new e,this._defaultValuesLoaded=!1}Subscribe(e,t){this.ValueChanged.Subscribe(e,t)}Unsubscribe(e){this.ValueChanged.Unsubscribe(e)}GetValue(e){return this[e]}SetValue(e,t){this.ParseAndSetValue(e,t),this.ValueChanged.Publish(e)}Merge(e=null){if(this._defaultValuesLoaded||(this.LoadDefaultValues(),this._defaultValuesLoaded=!0),null==e)return this.SetAutoIncrementIds(),this;for(let t in e)if(this.hasOwnProperty(t)){let r=e[t];this.ParseAndSetValue(t,r)}return this.SetAutoIncrementIds(),this}SetAutoIncrementIds(){if(null==this.StoreAutoIncrementDictionary)return;let e=this.StoreAutoIncrementDictionary;for(let r in this){if(!this.hasOwnProperty(r))continue;if(null==e[r])continue;let i=t.SanitizeNumber(this[r]);if(0==i||null==i){let t=e[r];++t,this[r]=t}e[r]=Math.max(this[r],e[r])}}ParseAndSetValue(e,t){let i=this[e],n=this.GetValueFromLoader(e,t);if(null!=n)return void(this[e]=n);if(["_fields","ValueChanged","IsDirty","_fields","_defaultValuesLoaded"].indexOf(e)>=0)return;if(null!=i&&i instanceof r)return void(null!=t&&t instanceof r?this[e]=t:this[e].Merge(t));if("number"==typeof i)return void(this[e]=parseFloat(null==t?0:t.toString()));if("boolean"==typeof i)return void(isNaN(t)?this[e]="true"==t:this[e]=!0===t||1==parseFloat(t));if("string"==typeof i)return void(this[e]=t);let l=null;if(null!=this.TypeDictionary&&(l=this.TypeDictionary),null==i||i.constructor!=Array){if(null==i&&null!=l[e]){if(null==t)return;let i=l[e];if(i.prototype instanceof r)return void(this[e]=(new i).Merge(t))}if(l[e]!=Object)throw"Could not process type "+typeof i+" of "+e;this[e]=t}else{if(null==l[e])throw"Property "+e+" of class "+this.constructor.name+" is an array but does not have the OptionType decorator implemented";let r=l[e];if(this[e]=[],r==String||r===Object)return void(this[e]=t);if(r==Number)return void(this[e]=t);for(let i of t)null!=i&&i.hasOwnProperty("_fields")&&i.hasOwnProperty("_defaultValuesLoaded")?this[e].push(i):this[e].push((new r).Merge(i))}}GetValueFromLoader(e,t){return null}ToObject(){return JSON.parse(JSON.stringify(this,((e,t)=>{if(!(["_fields","_defaultValuesLoaded","IsDirty","ValueChanged"].indexOf(e)>=0||"function"==typeof t))return t})))}SerializeObject(e){let t=["_fields","_defaultValuesLoaded","IsDirty"];for(let r in e){let i=e[r];t.indexOf(r)>=0||"function"==typeof i?delete e[r]:(Array.isArray(i)&&this.SerializeArray(i),"object"==typeof i&&(i=this.SerializeObject(i)))}return e}SerializeArray(e){for(let t=0;t<e.length;t++){let r=e[t];Array.isArray(r)&&this.SerializeArray(r),"object"==typeof r&&(e[t]=this.SerializeObject(r))}}}class i{static GetInstance(){return null==window.RNLocalEvent&&(window.RNLocalEvent=new n),window.RNLocalEvent}static Publish(e,t=null,r=null){return i.GetInstance().Publish(e,t,r)}static Subscribe(e,t,r=null,n=0){i.GetInstance().Subscribe(e,t,r,n)}static SubscriptionCount(e){let t=i.GetInstance().Events[e];return null==t?0:t.length}static UnsubscribeEvent(e,t){i.GetInstance().UnsubscribeEvent(e,t)}}i.LocalEvent=null;class n{constructor(){this.Events={}}Publish(e,t,r=null){if(null==this.Events[e])return r;let i=this.Events[e],n=null;for(let e of i){let r;r=e.CallBack(t),null!=r&&(n=r)}return null==n?r:n}Subscribe(e,t,r,i=0){null==this.Events[e]&&(this.Events[e]=[]);let n=this.Events[e],s=new l(e,t,i,r);for(let e=0;e<n.length;e++)if(n[e].Priority>s.Priority){n.splice(e,0,s),s=null;break}null!=s&&n.push(s)}UnsubscribeEvent(e,t){let r=this.Events[e];if(null==r)return;let i=r.find((e=>e.Reference==t));null!=i&&r.splice(r.indexOf(i),1),0==r.length&&delete this.Events[e]}}class l{constructor(e,t,r=0,i=null){this.Event=e,this.CallBack=t,this.Priority=r,this.Reference=i}}class s{static Sanitize(e,t){return(new s).SanitizeProperty(e,t)}SanitizeProperty(e,r){if(Array.isArray(r))return this.SanitizeArray(e,r);switch(typeof r){case"object":return this.SanitizeObject(e,r);case"string":return t.SanitizeString(e,r);case"boolean":return t.SanitizeBoolean(e,r);case"number":case"bigint":return t.SanitizeNumber(e,r)}return e}SanitizeArray(e,t){if(0==t.length)return[];let r=t[0];Array.isArray(e)||(e=[]);let i=[];for(let t of e)i.push(this.SanitizeProperty(t,r));return i}SanitizeObject(e,t){null!=e&&"object"==typeof e||(e={});for(let r in t){let i=t[r],n=e[r];e[r]=this.SanitizeProperty(n,i)}return e}}class a{static async Post(e,t=null,r=""){""==r&&(r=a.DefaultURL);var i=new FormData;i.append("action",(""!=a.DefaultPrefix?a.DefaultPrefix+"_":"")+e),i.append("_nonce",a.DefaultNonce),null!=t&&i.append("data",JSON.stringify(t));try{var n;let e=await fetch(r,{method:"POST",body:i}).then((e=>{if(e.status>=400&&e.status<600)throw new Error("Bad response from server");return e})),t=await e.json();return 0==t.success&&a.DefaultHandleError(null!==(n=t.errorMessage)&&void 0!==n?n:""),t.result}catch(e){return a.DefaultHandleError(e)}}static SetGlobalVar(e){var t,r;a.DefaultURL=e.ajaxurl,a.DefaultNonce=null!==(t=null==e?void 0:e._nonce)&&void 0!==t?t:"",a.DefaultPrefix=null!==(r=null==e?void 0:e._prefix)&&void 0!==r?r:""}}a.DefaultURL="",a.DefaultPrefix="",a.DefaultNonce="",a.DefaultHandleError=e=>null,exports.StoreBase=r,exports.StoreAutoIncrement=function(e){return function(e,t,r){null==e.StoreAutoIncrementDictionary&&(e.StoreAutoIncrementDictionary=[]),e.StoreAutoIncrementDictionary[t]=0}},exports.StoreDataType=function(e){return function(t,r,i){null==t.TypeDictionary&&(t.TypeDictionary={}),t.TypeDictionary[r]=e}},exports.EventManager=i,exports.WpAjaxPost=a,exports.SingleEvent=e,exports.Sanitizer=t,exports.ObjectSanitizer=s}));
