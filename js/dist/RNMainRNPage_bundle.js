rndefine("#RNMainRNPage",["#RNMainCore/StoreBase","#RNMainCore/SingleEvent","#RNMainCore/Sanitizer","#RNMainCore/WpAjaxPost","#RNMainCore/EventManager","#RNMainCoreUI/ToastService","#RNMainCoreUI/ModelBase","#RNMainCore/ObjectSanitizer","#RNMainCoreUI/ReactModel","#RNMainCoreUI/ModelWithParent"],(function(e,t,r,i,s,n,l,a,o,u){"use strict";class d extends e.StoreBase{LoadDefaultValues(){this.Id="",this.Label=""}}var p,c,h,b,m,D,y;let S;!function(e){e.Form="Form"}(S||(S={}));let I=(p=e.StoreDataType(d),c=e.StoreAutoIncrement("DataSource"),h=e.StoreDataType(String),b=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Columns",m,this),babelHelpers.initializerDefineProperty(this,"Id",D,this),babelHelpers.initializerDefineProperty(this,"FieldsUsed",y,this)}LoadDefaultValues(){this.Columns=[],this.InitialNeededRows=0,this.NeedsRowCount=!1,this.Id=0,this.FieldsUsed=[]}},m=babelHelpers.applyDecoratedDescriptor(b.prototype,"Columns",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=babelHelpers.applyDecoratedDescriptor(b.prototype,"Id",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=babelHelpers.applyDecoratedDescriptor(b.prototype,"FieldsUsed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b);var f,g,w,R,x,F,C,P;let M=(f=e.StoreAutoIncrement("SortItem"),g=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Id",w,this)}LoadDefaultValues(){this.Id=0,this.FieldId="",this.Orientation="desc",this.PathId=""}},w=babelHelpers.applyDecoratedDescriptor(g.prototype,"Id",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g),z=(R=e.StoreDataType(d),x=e.StoreDataType(M),F=class extends I{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Columns",C,this),babelHelpers.initializerDefineProperty(this,"Sort",P,this)}LoadDefaultValues(){super.LoadDefaultValues(),this.FormId=0,this.Columns=[],this.Sort=[],this.Type=S.Form,this.Condition=(new ke).Merge(),this.ParameterCondition=(new _e).Merge()}GetColumns(){return this.Columns}},C=babelHelpers.applyDecoratedDescriptor(F.prototype,"Columns",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=babelHelpers.applyDecoratedDescriptor(F.prototype,"Sort",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F);class G{constructor(e,r){this.PageModel=e,this.Options=r,this.SelectedRowChanged=new t.SingleEvent}HasPrevious(){return this.StartIndex>0}HasNext(){return this.EndIndex<this.TotalRowCount-1}async SelectNext(){this.SelectedIndex+1>=this.EndIndex?await this.FetchRows(this.SelectedIndex+1,this.Options.InitialNeededRows)&&this.Rows.length>0&&this.SetSelectedRow(this.Rows[0]):this.SelectedIndex=Math.min(++this.SelectedIndex,this.TotalRowCount-1)}async SelectPrevious(){this.SelectedIndex-1<=this.StartIndex?await this.FetchRows(Math.max(0,this.SelectedIndex-1-this.Options.InitialNeededRows),this.Options.InitialNeededRows)&&this.Rows.length>0&&this.SetSelectedRow(this.Rows[0]):this.SelectedIndex=Math.max(--this.SelectedIndex,0)}SetSelectedRow(e){this.SelectedIndex=this.StartIndex+this.Rows.indexOf(e),this.SelectedRowChanged.Publish()}}class B extends class{constructor(e){this.Row=e}get Id(){return 0}}{constructor(e,t,r){super(e),this.Field=t,this.Data=r,this.Row=e}get Id(){return this.Field.Id}GetStringValue(){return null==this.Field?"":this.Field.ParseStringValue(this.Data)}GetLabel(){return this.Field.Label}IsEmpty(){return null==this.Field||this.Field.IsEmpty(this.Data)}}class N extends class{constructor(e,t){this.DataSource=e,this.Data=t,this.Columns=[]}Initialize(){}GetColumn(e){return this.Columns.find((t=>t.Id==e))}GetValue(e){return this.Data["f_"+e]}}{constructor(e,t){super(e,t),this.DataSource=e,this.Columns=[],this.Reference=""}Initialize(){for(let e in this.Data)switch(e){case"Reference":this.Reference=this.Data[e];break;default:let t=e.replace("f_",""),r=this.DataSource.Form.Fields.find((e=>e.Id==t));null!=r&&this.Columns.push(new B(this,r,this.Data[e]))}}}class T extends G{constructor(e,t){super(e,t),this.Options=t,this.Rows=[]}GetForm(){return this.PageModel.GetFormById(this.Options.FormId)}get SelectedRow(){return-1==this.SelectedIndex?null:this.Rows[this.SelectedIndex-this.StartIndex]}async FetchRows(e,t){let s=await i.WpAjaxPost.Post("GetNextRows",{PageId:this.PageModel.PageId,DataSource:this.Options.Id,Nonce:this.Nonce,Index:e,Count:t,PostItems:this.PageModel.AdditionalOptions.PostItems});if(null!=s){this.Rows=[],this.SelectedIndex=-1,this.StartIndex=e,this.EndIndex=e+s.Rows.length-1,this.TotalRowCount=r.Sanitizer.SanitizeNumber(s.Count,-1);for(let e of s.Rows){let t=new N(this,e);t.Initialize(),this.Rows.push(t)}return!0}}GetColumns(){return[]}async Initialize(){if(this.Rows=[],this.StartIndex=0,this.EndIndex=0,this.SelectedIndex=-1,this.Form=this.PageModel.Forms.find((e=>e.Id==this.Options.FormId)),null==this.Form&&!this.PageModel.IsDesign)throw new Error("Form not found");let e=this.PageModel.AdditionalOptions.DataSourcesData.find((e=>e.Id==this.Options.Id));if(null!=e){this.Nonce=e.Nonce,this.TotalRowCount=r.Sanitizer.SanitizeNumber(e.Count,-1),this.StartIndex=0,this.EndIndex=this.StartIndex+e.Rows.length-1;for(let t of e.Rows){let e=new N(this,t);e.Initialize(),this.Rows.push(e)}this.Rows.length>0&&(this.SelectedIndex=0)}}GetFieldByColumnId(e){return this.Form.Fields.find((t=>t.Id==e))}GetSelectedRowColumn(e){var t;return null===(t=this.SelectedRow)||void 0===t?void 0:t.Columns.find((t=>t.Id==e))}GetStringValue(e){let t=this.GetSelectedRowColumn(e);return null==t?"":t.GetStringValue()}GetColumnLabel(e){var t,r;return null!==(t=null===(r=this.Form.Fields.find((t=>t.Id==e)))||void 0===r?void 0:r.Label)&&void 0!==t?t:""}IsEmpty(e){let t=this.GetSelectedRowColumn(e);return null==t||t.IsEmpty()}GetSimilarInput(e,t){let r=this.GetFieldByColumnId(t);if(null==r)return null;let i=this.GetSelectedRowColumn(t);return r.RenderModel(e,r,null==i?void 0:i.Data)}}class O{static GetDataSourceOptions(e){switch(e.Type){case S.Form:return(new z).Merge(e)}}static GetDataSource(e,t){switch(e.Type){case S.Form:return new T(t,e)}}}var L,V,E;let H;!function(e){e.FormField="FormField",e.None="None",e.Text="Text",e.Navigator="Navigator",e.Grid="Grid",e.SearchBar="SearchBar",e.Image="Image",e.List="List",e.Calendar="Calendar",e.Form="Form"}(H||(H={}));let v=(L=e.StoreAutoIncrement("BlockId"),V=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Id",E,this)}LoadDefaultValues(){this.Type=H.List,this.Id=0,this.Width=100}},E=babelHelpers.applyDecoratedDescriptor(V.prototype,"Id",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V);var k,U,A;let _=(k=e.StoreAutoIncrement("RNColumnOptions"),U=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Id",A,this)}LoadDefaultValues(){this.Block=new v,this.Id=0}GetValueFromLoader(e,t){switch(e){case"Block":return class{static GetOptions(e,t){let r=s.EventManager.Publish("GetBlockOptions",{Name:t.Type});return null==r?(n.ToastService.SendErrorMessage("Block "+t.Type+" not found"),null):r.Merge(t)}}.GetOptions(this,t);default:return super.GetValueFromLoader(e,t)}}},A=babelHelpers.applyDecoratedDescriptor(U.prototype,"Id",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U);var W,j,q,X,J;let K=(W=e.StoreDataType(_),j=e.StoreAutoIncrement("RNRowOptions"),q=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Columns",X,this),babelHelpers.initializerDefineProperty(this,"Id",J,this)}LoadDefaultValues(){this.Columns=[],this.Id=0}},X=babelHelpers.applyDecoratedDescriptor(q.prototype,"Columns",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J=babelHelpers.applyDecoratedDescriptor(q.prototype,"Id",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),q);var Q,Y,Z,$,ee,te,re,ie,se,ne,le,ae,oe,ue,de,pe,ce,he,be,me,De,ye,Se,Ie,fe,ge,we,Re,xe,Fe,Ce;let Pe,Me,ze,Ge,Be,Ne=(Q=e.StoreDataType(Object),Y=e.StoreDataType(Object),Z=e.StoreDataType(Object),$=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"FormList",ee,this),babelHelpers.initializerDefineProperty(this,"DataSourcesData",te,this),babelHelpers.initializerDefineProperty(this,"PostItems",re,this)}LoadDefaultValues(){this.Nonce="",this.FormList=null,this.DataSourcesData=[],this.PostItems=[]}},ee=babelHelpers.applyDecoratedDescriptor($.prototype,"FormList",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),te=babelHelpers.applyDecoratedDescriptor($.prototype,"DataSourcesData",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),re=babelHelpers.applyDecoratedDescriptor($.prototype,"PostItems",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$),Te=(ie=e.StoreDataType(K),se=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Rows",ne,this)}LoadDefaultValues(){this.DataSources=[],this.Rows=[],this.Style=""}GetValueFromLoader(e,t){switch(e){case"DataSources":return class{static GetOptions(e){let t=[];for(let r of e){let e=O.GetDataSourceOptions(r);null!=e&&t.push(e)}return t}}.GetOptions(t);default:return t}}},ne=babelHelpers.applyDecoratedDescriptor(se.prototype,"Rows",[ie],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),se);!function(e){e.OpenURL="OpenURL",e.GoToPage="GoToPage"}(Pe||(Pe={})),function(e){e.Self="_self",e.NewTab="_blank"}(Me||(Me={})),function(e){e.Equal="Equal",e.NotEqual="NotEqual",e.IsEmpty="IsEmpty",e.IsNotEmpty="IsNotEmpty",e.None="None",e.UserViewingThePage="UserViewingThePage",e.LastXEntries="LastXEntries",e.LastXEntriesByUser="LastXEntriesByUser",e.Contains="Contains",e.UserIs="UserIs",e.UserIsNot="UserIsNot",e.HasRole="HasRole",e.HasNotRole="HasNotRole",e.NotContains="NotContains",e.GreaterThan="GreaterThan",e.GreaterOrEqualThan="GreaterOrEqualThan",e.LessThan="LessThan",e.LessOrEqualThan="LessOrEqualThan",e.IsChecked="IsChecked",e.IsNotChecked="IsNotChecked"}(ze||(ze={})),function(e){e.Standard="Standard",e.None="None"}(Ge||(Ge={})),function(e){e.List="List",e.DateTime="DateTime",e.Date="Date",e.FileUpload="FileUpload",e.Multiple="Multiple",e.Number="Number",e.Text="Text",e.Time="Time",e.Toggle="Toggle",e.User="User",e.EntryId="EntryId",e.Composed="Composed",e.Signature="Signature",e.None="None",e.HTML="html"}(Be||(Be={}));let Oe=(le=e.StoreAutoIncrement("ConditionLineOptions"),ae=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Id",oe,this)}LoadDefaultValues(){this.Id=0,this.FieldId="",this.Comparison=ze.None,this.Value="",this.Type=Ge.None,this.SubType=Be.None,this.PathId=""}GetValueFromLoader(e,t){switch(e){case"Value":return class{static GetValue(e,t){return e.SubType!=Be.Multiple||""!=t&&Array.isArray(t)?t:[]}}.GetValue(this,t);default:return t}}},oe=babelHelpers.applyDecoratedDescriptor(ae.prototype,"Id",[le],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ae);let Le,Ve,Ee=(ue=e.StoreAutoIncrement("ConditionGroupOptions"),de=e.StoreDataType(Oe),pe=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Id",ce,this),babelHelpers.initializerDefineProperty(this,"ConditionLines",he,this)}LoadDefaultValues(){this.ConditionLines=[],this.Id=0}},ce=babelHelpers.applyDecoratedDescriptor(pe.prototype,"Id",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),he=babelHelpers.applyDecoratedDescriptor(pe.prototype,"ConditionLines",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pe);!function(e){e.Filter="Filter"}(Le||(Le={})),function(e){e.Field="Field"}(Ve||(Ve={}));class He extends e.StoreBase{LoadDefaultValues(){this.Type=Ve.Field,this.Id=""}}let ve=(be=e.StoreAutoIncrement("ConditionOptionsBase"),me=e.StoreDataType(Ee),De=e.StoreDataType(He),ye=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Id",Se,this),babelHelpers.initializerDefineProperty(this,"ConditionGroups",Ie,this),babelHelpers.initializerDefineProperty(this,"ElementsUsed",fe,this)}LoadDefaultValues(){this.Id=0,this.Type=Le.Filter,this.ElementsUsed=[],this.ConditionGroups=[]}},Se=babelHelpers.applyDecoratedDescriptor(ye.prototype,"Id",[be],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ie=babelHelpers.applyDecoratedDescriptor(ye.prototype,"ConditionGroups",[me],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fe=babelHelpers.applyDecoratedDescriptor(ye.prototype,"ElementsUsed",[De],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ye);class ke extends ve{}class Ue extends Oe{LoadDefaultValues(){super.LoadDefaultValues(),this.IsRequired=!1,this.ParameterName=""}}let Ae=(ge=e.StoreDataType(Ue),we=class extends Ee{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"ConditionLines",Re,this)}LoadDefaultValues(){super.LoadDefaultValues()}},Re=babelHelpers.applyDecoratedDescriptor(we.prototype,"ConditionLines",[ge],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),we),_e=(xe=e.StoreDataType(Ae),Fe=class extends ve{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"ConditionGroups",Ce,this)}LoadDefaultValues(){super.LoadDefaultValues()}},Ce=babelHelpers.applyDecoratedDescriptor(Fe.prototype,"ConditionGroups",[xe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fe);var We,je,qe;let Xe=(We=e.StoreDataType(Object),je=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"RawSettings",qe,this)}LoadDefaultValues(){this.Id="",this.IsPR=!1,this.Label="",this.Type=Be.None,this.SubType="",this.RawSettings=null,this.RendererType=""}get UseInConditions(){return!0}ParseValue(e){}ParseStringValue(e){return r.Sanitizer.GetStringValueFromPath(e,["Value"])}IsEmpty(e){return""==this.ParseStringValue(e)}SubRender(e){}RenderModel(e,t,r){return s.EventManager.Publish("GetFieldRendererModel",{Field:t,Block:e,Data:r})}},qe=babelHelpers.applyDecoratedDescriptor(je.prototype,"RawSettings",[We],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),je);class Je extends Xe{}class Ke extends Xe{}class Qe extends Xe{ParseStringValue(e){return r.Sanitizer.GetStringValueFromPath(e,["DisplayName"])}IsEmpty(e){return super.IsEmpty(e)}}class Ye extends Xe{}class Ze extends Xe{}class $e extends Xe{}var et,tt,rt;class it extends e.StoreBase{LoadDefaultValues(){this.Label="",this.Value="",this.Price=""}}let st=(et=e.StoreDataType(it),tt=class extends Xe{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Items",rt,this)}LoadDefaultValues(){super.LoadDefaultValues(),this.Items=[]}ParseStringValue(e){return e=r.Sanitizer.GetValueFromPath(e,["Values"]),Array.isArray(e)?e.join(", "):""}IsEmpty(e){return e=r.Sanitizer.GetValueFromPath(e,["Values"]),!Array.isArray(e)||0==e.length}},rt=babelHelpers.applyDecoratedDescriptor(tt.prototype,"Items",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tt);class nt extends Xe{ParseStringValue(e){return a.ObjectSanitizer.Sanitize(r.Sanitizer.GetValueFromPath(e,["Value"],[]),[{URL:"",Name:"",Extension:"",Mime:""}]).map((e=>e.URL)).join(", ")}get UseInConditions(){return!1}}class lt extends Xe{}class at extends Xe{}var ot,ut,dt,pt,ct,ht,bt,mt,Dt;let yt=(ot=e.StoreDataType(String),ut=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Path",dt,this)}LoadDefaultValues(){this.Id="",this.Label="",this.AddCommaBefore=!1,this.Path=[]}},dt=babelHelpers.applyDecoratedDescriptor(ut.prototype,"Path",[ot],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ut),St=(pt=e.StoreDataType(yt),ct=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Items",ht,this)}LoadDefaultValues(){this.Items=[]}},ht=babelHelpers.applyDecoratedDescriptor(ct.prototype,"Items",[pt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ct),It=(bt=e.StoreDataType(St),mt=class extends Xe{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Rows",Dt,this)}LoadDefaultValues(){super.LoadDefaultValues(),this.Rows=[]}ParseStringValue(e){return r.Sanitizer.GetValueFromPath(e,["Value","value"])}IsEmpty(e){return""==r.Sanitizer.GetValueFromPath(e,["Value","value"])}},Dt=babelHelpers.applyDecoratedDescriptor(mt.prototype,"Rows",[bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mt);class ft extends Xe{get UseInConditions(){return!1}}class gt extends Xe{}class wt extends Xe{ParseStringValue(e){return String(e)}IsEmpty(e){return""==r.Sanitizer.SanitizeString(e)}}class Rt extends Xe{get UseInConditions(){return!1}}class xt{static GetFieldOptions(e){switch("string"==typeof e&&(e={Type:e}),e.Type){case Be.Text:return(new Je).Merge(e);case Be.None:return(new Ke).Merge(e);case Be.User:return(new Qe).Merge(e);case Be.Toggle:return(new Ye).Merge(e);case Be.Time:return(new Ze).Merge(e);case Be.Number:return(new $e).Merge(e);case Be.Multiple:return(new st).Merge(e);case Be.FileUpload:return(new nt).Merge(e);case Be.DateTime:return(new lt).Merge(e);case Be.List:return(new at).Merge(e);case Be.Composed:return(new It).Merge(e);case Be.HTML:return(new ft).Merge(e);case Be.Date:return(new gt).Merge(e);case Be.EntryId:return(new wt).Merge(e);case Be.Signature:return(new Rt).Merge(e)}}}var Ft,Ct,Pt;let Mt=(Ft=e.StoreDataType(Xe),Ct=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Fields",Pt,this)}LoadDefaultValues(){this.Id="",this.OriginalId="",this.Notifications="",this.Fields=[],this.Name=""}GetField(e){return this.Fields.find((t=>t.Id==e))}GetValueFromLoader(e,t){if("Fields"==e){if(null==t)return[];let e=[];for(let r of t){let t=xt.GetFieldOptions(r);null!=t&&e.push(t)}return e}}},Pt=babelHelpers.applyDecoratedDescriptor(Ct.prototype,"Fields",[Ft],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ct);class zt extends o.ReactModel{constructor(e){super(e),this.state={}}render(){return React.createElement("div",{className:"rednao"},this.GenerateRow(this.props.Model.Rows.map((e=>e.Render()))))}GenerateRow(e){return e}}zt.defaultProps={};class Gt extends o.ReactModel{constructor(e){super(e),this.state={}}render(){var e;let t=this.Model.Block.Render();return null==t?null:React.createElement("div",{className:"rncolumn",style:{display:"inline-block",verticalAlign:"top",width:(null===(e=this.Model.Block)||void 0===e?void 0:e.Options.Width)+"%"}},t)}}var Bt,Nt,Tt;Gt.defaultProps={};let Ot=(Bt=l.ModelSerialize("Block"),Nt=class extends u.ModelWithParent{constructor(e,t){super(e,t),babelHelpers.initializerDefineProperty(this,"_block",Tt,this),null!=this.Options.Block&&this.Options.Block.Type!=H.None&&(this._block=this.Page.CreateBlockModel(this.Options.Block,this))}get Index(){return null==this.Parent?-1:this.Parent.Columns.indexOf(this)}get Page(){var e;return null===(e=this.Parent)||void 0===e?void 0:e.Page}SetBlock(e){return this._block=e,e.Parent=this,this}get Block(){return this._block}Render(){return React.createElement(Gt,{Model:this,key:this.Options.Id})}},Tt=babelHelpers.applyDecoratedDescriptor(Nt.prototype,"_block",[Bt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt);class Lt extends o.ReactModel{constructor(e){super(e),this.state={},this.InstanceRendered=this.InstanceRendered.bind(this)}render(){let e=this.Model.Columns.map((e=>e.Render()));return e.some((e=>null!=e))?React.createElement("div",{className:"rnrow",ref:this.InstanceRendered},this.GenerateRowItems(e)):null}InstanceRendered(e){null!=e&&(this.props.Model.Instance=e)}GenerateRowItems(e){return e}}var Vt,Et,Ht;Lt.defaultProps={};let vt=(Vt=l.ModelSerialize("Columns"),Et=class extends u.ModelWithParent{constructor(e,t){super(e,t),babelHelpers.initializerDefineProperty(this,"_columns",Ht,this),this._columns=[];for(let e of this.Options.Columns)this._columns.push(this.CreateColumn(e))}get Page(){return this.Parent.RootContainer}get Index(){return null==this.Parent?-1:this.Parent.Rows.indexOf(this)}CreateColumn(e=null){let t=(new _).Merge(e);return new Ot(t,this)}InsertColumn(e,t=0,r=!1){if(r){let t=Math.round(100/(this._columns.length+1));this._columns.forEach((e=>e.Block.Options.Width=t)),e.Block.Options.Width=t+(100-(this._columns.length+1)*t)}this._columns.splice(t,0,e),e.Parent=this,this.Refresh()}get Columns(){return this._columns}Render(){return React.createElement(Lt,{Model:this,key:this.Options.Id})}},Ht=babelHelpers.applyDecoratedDescriptor(Et.prototype,"_columns",[Vt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Et);function kt(e){return class extends e{constructor(...e){super(...e),this.IsBlockContainer=!0}GetBlockById(e,t=!1,r=!1){let i=this.GetBlocks(t).find((t=>t.Options.Id==e));return null==i&&r&&null!=this.ParentContainer?this.ParentContainer.GetBlockById(e,!1,!0):i}GetBlocks(e=!1){let t=[];for(let r of this.Rows)for(let i of r.Columns)t.push(i.Block),i.Block.IsFieldContainer&&e&&(t=t.concat(i.Block.GetBlocks(e)));return t}get RootContainer(){return null==this.ParentContainer?this:this.ParentContainer.RootContainer}CreateRow(e=null){let t=(new K).Merge(e);return new vt(t,this)}GetRowCount(){return this.GetRowArray().length}get Rows(){return this.GetRowArray()}InsertRow(e,t=0){this.GetRowArray().splice(t,0,e),this.Refresh()}CreateBlockOptionsAndModel(e,t=null){let r=this.CreateBlockOptions(e);return null==r?null:this.CreateBlockModel(r,t)}CreateBlockOptions(e){if(null!=e.Type){let t=s.EventManager.Publish("GetBlockOptions",{Name:e.Type});return null==t?null:t.Merge(e)}return s.EventManager.Publish("GetBlockOptions",{Name:e}).Merge()}CreateBlockModel(e,t=null){let r=s.EventManager.Publish("GetBlockModel",{Options:e,Parent:t});return null==r&&console.log("Block not found "+e.Type),r}get ParentContainer(){let e=this.Parent;for(;null!=e;){if(1==e.IsBlockContainer)return e;e=e.Parent}return null}}}var Ut,At,_t;let Wt=(Ut=l.ModelSerialize("Rows"),At=class extends(kt(l.ModelBase)){constructor(e,t,r){super(t),babelHelpers.initializerDefineProperty(this,"_rows",_t,this),this.AdditionalOptions=r,this.IsField=!1,this._rows=[];for(let e of this.Options.Rows)this._rows.push(this.CreateRow(e));this.PageId=e}get DefaultDataSources(){return this.DataSources.length>0?this.DataSources[0]:null}get FormFields(){var e,t,r;return null!==(e=null===(t=this.DefaultDataSources)||void 0===t||null===(r=t.Form)||void 0===r?void 0:r.Fields)&&void 0!==e?e:[]}GetRowArray(){return this._rows}GetRendererFactory(){return s.EventManager.Publish("GetRendererFactory")}async Initialize(){return this.GenerateForms(),await this.InitializeDataSources(),this.InitializeBlocks(),this}async InitializeDataSources(){this.DataSources=[];for(let e of this.Options.DataSources){let t=this.GetDataSourceFactory().GetDataSource(e,this);null!=t&&(this.DataSources.push(t),await t.Initialize())}}GetDataSourceFactory(){return O}GetFormById(e){return this.Forms.find((t=>t.Id==e))}GenerateForms(){this.Forms=[];for(let e of this.AdditionalOptions.FormList)this.Forms.push((new Mt).Merge(e))}Render(){return React.createElement(zt,{Model:this})}get IsDesign(){return!1}InitializeBlocks(){this.GetBlocks().forEach((e=>e.Initialize()))}},_t=babelHelpers.applyDecoratedDescriptor(At.prototype,"_rows",[Ut],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),At);var jt,qt,Xt;let Jt=(jt=e.StoreDataType(Xe),qt=class extends e.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Fields",Xt,this)}LoadDefaultValues(){this.Id="",this.OriginalId="",this.Notifications="",this.Fields=[],this.Name=""}GetField(e){return this.Fields.find((t=>t.Id==e))}GetValueFromLoader(e,t){if("Fields"==e){if(null==t)return[];let e=[];for(let r of t){let t=xt.GetFieldOptions(r);null!=t&&e.push(t)}return e}}},Xt=babelHelpers.applyDecoratedDescriptor(qt.prototype,"Fields",[jt],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qt);class Kt extends o.ReactModel{constructor(e){super(e),this.state={}}render(){let e=this.SubRender();return null==e?null:React.createElement("div",{className:"rnblock "+this.props.Model.Options.Type},e)}}Kt.defaultProps={};class Qt extends u.ModelWithParent{constructor(e,t){super(e,t)}Render(){throw new Error("not implemented")}get IsFieldContainer(){return!1}get Page(){var e;return null===(e=this.Container)||void 0===e?void 0:e.RootContainer}get Row(){var e;return null===(e=this.Parent)||void 0===e?void 0:e.Parent}get Column(){return this.Parent}get Container(){var e;return null===(e=this.Parent)||void 0===e?void 0:e.Parent.Parent}get RowIndex(){var e,t;return null!==(e=null===(t=this.Row)||void 0===t?void 0:t.Index)&&void 0!==e?e:-1}Initialize(){}get ColIndex(){let e=this.Row,t=this.Column;return null==e||null==e.Parent||null==t?-1:e.Columns.indexOf(t)}}class Yt extends React.Component{constructor(e){super(e),this.state={}}get Model(){return this.props.Model}render(){let e={};return this.props.Model.Block.Page.IsDesign&&(e.pointerEvents="none"),React.createElement("div",{style:e,className:"readonly rnFieldRenderer renderer"+this.Model.Field.RendererType},this.SubRender())}}Yt.defaultProps={};exports.RNPage=zt,exports.RNPageOptions=Te,exports.RNPageModel=Wt,exports.Form=Jt,exports.FormFieldBase=Xe,exports.ConditionGroupOptions=Ee,exports.ConditionLineTypeEnum=Ge,exports.ConditionLineOptions=Oe,exports.FieldTypeEnum=Be,exports.FilterConditionOptions=ke,exports.ComparisonTypeEnum=ze,exports.ElementUsedOptions=He,exports.ElementUsedTypeEnum=Ve,exports.ConditionLineTypeEnum=Ge,exports.FormFieldFactory=xt,exports.ComposedFormField=It,exports.DateTimeFormField=lt,exports.FileUploadFormField=nt,exports.ListFormField=at,exports.MultipleFormField=st,exports.NoneFormField=Ke,exports.NumberFormField=$e,exports.TextFormField=Je,exports.TimeFormField=Ze,exports.ToggleFormField=Ye,exports.UserFormField=Qe,exports.HTMLFormField=ft,exports.FormDataSourceOptions=z,exports.DataSourceBaseOptions=I,exports.FormDataSource=T,exports.DataSourceBase=G,exports.DataSourceTypeEnum=S,exports.EntryIdFormField=wt,exports.RNRow=Lt,exports.RNRowOptions=K,exports.RNRowModel=vt,exports.RNColumn=Gt,exports.RNColumnModel=Ot,exports.RNColumnOptions=_,exports.RNBlockBase=Kt,exports.RNBlockBaseOptions=v,exports.RNBlockBaseModel=Qt,exports.BlockTypeEnum=H,exports.ColumnBaseOptions=d,exports.AdditionalOptions=Ne,exports.RNBlockWithDataSourceOptions=class extends v{LoadDefaultValues(){super.LoadDefaultValues(),this.DataSourceId=0}},exports.RNBlockWithDataSourceModel=class extends Qt{get DataSource(){return this.Page.DataSources.find((e=>e.Options.Id=this.Options.DataSourceId))}Initialize(){var e;super.Initialize(),null===(e=this.DataSource)||void 0===e||e.SelectedRowChanged.Subscribe(this,(()=>this.Refresh()))}},exports.RendererFactoryBase=class{},exports.RendererBase=Yt,exports.RendererBaseModel=class{constructor(e,t,r){this.Block=e,this.Field=t,this.Data=r}GetRawSettingString(e,t=""){return r.Sanitizer.GetStringValueFromPath(this.Field,["RawSettings",...e])}GetRawSettingsArray(e,t=[]){return r.Sanitizer.GetValueFromPath(e,["RawSettings","choices"],[])}GetStringValue(){return this.Field.ParseStringValue(this.Data)}},exports.SignatureFormField=Rt,exports.BlockContainer={BlockContainerMixin:kt},exports.ConditionOptionsBase=ve,exports.ParameterConditionGroupOptions=Ae,exports.ParameterConditionLineOptions=Ue,exports.ParameterConditionOptions=_e,exports.SortItemOptions=M,exports.ClickActionEnum=Pe,exports.ClickTargetEnum=Me}));
