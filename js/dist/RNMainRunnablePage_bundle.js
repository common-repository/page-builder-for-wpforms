rndefine("#RNMainRunnablePage",["#RNMainCore/EventManager","#RNMainCore/WpAjaxPost","#RNMainCore/StoreBase"],(function(e,t,s){"use strict";class i{constructor(t,s){if(this.Options=t,this.Row=s,this.Block=e.EventManager.Publish("GetRunnable",{Options:this.Options.Block,Column:this.Row}),null==this.Block)throw new Error("Block not found "+this.Options.Block.Type)}get Page(){return this.Row.Page}}class n{constructor(e,t){this.Options=e,this.Page=t,this.Columns=[];for(let t of e.Columns)this.Columns.push(new i(t,this))}}t.WpAjaxPost.SetGlobalVar(rnPageSharedVar);class o extends s.StoreBase{LoadDefaultValues(){this.Id=0,this.Type=""}}class a extends s.StoreBase{LoadDefaultValues(){this.Block=null}GetValueFromLoader(t,s){switch(t){case"Block":return class{static GetOptions(t,s){return e.EventManager.Publish("GetRunnableOptions",s)}}.GetOptions(t,s)}}}var r,l,u;let p=(r=s.StoreDataType(a),l=class extends s.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Columns",u,this)}LoadDefaultValues(){this.Columns=[]}},u=babelHelpers.applyDecoratedDescriptor(l.prototype,"Columns",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),l);var h,c,d,b,m;let P=(h=s.StoreDataType(p),c=s.StoreDataType(Object),d=class extends s.StoreBase{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Rows",b,this),babelHelpers.initializerDefineProperty(this,"AdditionalOptions",m,this)}LoadDefaultValues(){this.Id="",this.Rows=[],this.AdditionalOptions=null}},b=babelHelpers.applyDecoratedDescriptor(d.prototype,"Rows",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=babelHelpers.applyDecoratedDescriptor(d.prototype,"AdditionalOptions",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d);exports.RunnableBlockBase=class{constructor(e,t){this.Column=t,this.Options=e,this.Container=this.Page.Container.querySelector('div[data-id="'+this.Options.Id+'"]')}get Page(){return this.Column.Page}},exports.RunnablePage=class{constructor(e,t){this.Options=e,this.Container=t,this.Rows=[];for(let e of this.Options.Rows)this.Rows.push(new n(e,this))}GetPostItem(e,t=null){let s=this.Container.querySelector(`[name="PostItems[${e}]"]`);if(null==s)return t;try{return JSON.parse(s.value)}catch(e){return s.value}}Submit(){this.Container.submit()}Initialize(){}GoToPage(e){RNSubmitAction({preventDefault:()=>{},currentTarget:this.Container},"index",e)}ChangePageSize(e){this.AddPostItem("PageSize",e),this.GoToPage(0)}AddFieldPostItem(e,t){this.AddPostItem("field_"+e.Options.Id,t)}GetFieldPostItem(e){let t=this.Container.querySelector(`[name="PostItems[field_${e.Options.Id}]"]`);return null==t?null:JSON.parse(t.value)}AddPostItem(e,t){let s=this.Container.querySelector(`PostItems[${e}]`);null==s&&(s=document.createElement("input"),s.type="hidden",s.setAttribute("name",`PostItems[${e}]`),this.Container.querySelector(".renderedPageForm").append(s)),s.value=JSON.stringify(t)}},exports.RunnableBlockBaseOptions=o,exports.RunnablePageOptions=P}));
