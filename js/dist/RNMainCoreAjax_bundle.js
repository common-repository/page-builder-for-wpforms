rndefine("#RNMainCoreAjax",["#RNMainCoreUI/ToastService"],(function(e){"use strict";var t=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},r=Object.prototype.toString;function n(e){return"[object Array]"===r.call(e)}function o(e){return null!==e&&"object"==typeof e}function a(e){return"[object Function]"===r.call(e)}function s(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),n(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}var i={isArray:n,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:o,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:a,isStream:function(e){return o(e)&&a(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:s,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,o=arguments.length;n<o;n++)s(arguments[n],r);return t},extend:function(e,r,n){return s(r,(function(r,o){e[o]=n&&"function"==typeof r?t(r,n):r})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}},u=function(e,t,r,n,o){return function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e}(new Error(e),t,r,n,o)};function c(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var l=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],f=i.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=i.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},p=i.isStandardBrowserEnv()?{write:function(e,t,r,n,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),i.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),i.isString(n)&&s.push("path="+n),i.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},d=function(e){return new Promise((function(t,r){var n=e.data,o=e.headers;i.isFormData(n)&&delete o["Content-Type"];var a=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",d=e.auth.password||"";o.Authorization="Basic "+btoa(s+":"+d)}if(a.open(e.method.toUpperCase(),function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(i.isURLSearchParams(t))n=t.toString();else{var o=[];i.forEach(t,(function(e,t){null!=e&&(i.isArray(e)?t+="[]":e=[e],i.forEach(e,(function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),o.push(c(t)+"="+c(e))})))})),n=o.join("&")}return n&&(e+=(-1===e.indexOf("?")?"?":"&")+n),e}(e.url,e.params,e.paramsSerializer),!0),a.timeout=e.timeout,a.onreadystatechange=function(){if(a&&4===a.readyState&&(0!==a.status||a.responseURL&&0===a.responseURL.indexOf("file:"))){var n,o,s,c,f,p="getAllResponseHeaders"in a?(n=a.getAllResponseHeaders(),f={},n?(i.forEach(n.split("\n"),(function(e){if(c=e.indexOf(":"),o=i.trim(e.substr(0,c)).toLowerCase(),s=i.trim(e.substr(c+1)),o){if(f[o]&&l.indexOf(o)>=0)return;f[o]="set-cookie"===o?(f[o]?f[o]:[]).concat([s]):f[o]?f[o]+", "+s:s}})),f):f):null,d={data:e.responseType&&"text"!==e.responseType?a.response:a.responseText,status:a.status,statusText:a.statusText,headers:p,config:e,request:a};!function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(u("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}(t,r,d),a=null}},a.onerror=function(){r(u("Network Error",e,null,a)),a=null},a.ontimeout=function(){r(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",a)),a=null},i.isStandardBrowserEnv()){var h=p,m=(e.withCredentials||f(e.url))&&e.xsrfCookieName?h.read(e.xsrfCookieName):void 0;m&&(o[e.xsrfHeaderName]=m)}if("setRequestHeader"in a&&i.forEach(o,(function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete o[t]:a.setRequestHeader(t,e)})),e.withCredentials&&(a.withCredentials=!0),e.responseType)try{a.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&a.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&a.upload&&a.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){a&&(a.abort(),r(e),a=null)})),void 0===n&&(n=null),a.send(n)}))},h={"Content-Type":"application/x-www-form-urlencoded"};function m(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var g,y={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process)&&(g=d),g),transformRequest:[function(e,t){return function(e,t){i.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(m(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(m(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};y.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],(function(e){y.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){y.headers[e]=i.merge(h)}));var w=y;function v(){this.handlers=[]}v.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},v.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},v.prototype.forEach=function(e){i.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var S=v,E=function(e,t,r){return i.forEach(r,(function(r){e=r(e,t)})),e},x=function(e){return!(!e||!e.__CANCEL__)};function R(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var C=function(e){var t,r,n;return R(e),e.baseURL&&(n=e.url,!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(n))&&(e.url=(t=e.baseURL,(r=e.url)?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t)),e.headers=e.headers||{},e.data=E(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||w.adapter)(e).then((function(t){return R(e),t.data=E(t.data,t.headers,e.transformResponse),t}),(function(t){return x(t)||(R(e),t&&t.response&&(t.response.data=E(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))};function b(e){this.defaults=e,this.interceptors={request:new S,response:new S}}b.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),(e=i.merge(w,{method:"get"},this.defaults,e)).method=e.method.toLowerCase();var t=[C,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},i.forEach(["delete","get","head","options"],(function(e){b.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}})),i.forEach(["post","put","patch"],(function(e){b.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}}));var A=b;function j(e){this.message=e}j.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},j.prototype.__CANCEL__=!0;var N=j;function T(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new N(e),t(r.reason))}))}T.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},T.source=function(){var e;return{token:new T((function(t){e=t})),cancel:e}};var O=T;function U(e){var r=new A(e),n=t(A.prototype.request,r);return i.extend(n,A.prototype,r),i.extend(n,r),n}var B=U(w);B.Axios=A,B.create=function(e){return U(i.merge(w,e))},B.Cancel=N,B.CancelToken=O,B.isCancel=x,B.all=function(e){return Promise.all(e)},B.spread=function(e){return function(t){return e.apply(null,t)}};var P=B,D=B;P.default=D;var L=P;class q{constructor(e,t,r,n,o){if(this.options=n,this.headers=void 0,this.cancelSource=null,null==this.options&&(this.options={}),this.SetDefaultValue("OnError",null),this.SetDefaultValue("ReturnError",!1),null!=window.RNGlobalVar&&(void 0!==window.RNGlobalVar._nonce&&this.SetDefaultValue("Nonce",window.RNGlobalVar._nonce),void 0!==window.RNGlobalVar._prefix&&this.SetDefaultValue("Prefix",window.RNGlobalVar._prefix)),this.url=r,""!=e){if(this.data=new FormData,this.data.append("action",e),this.data.append("data",JSON.stringify(t)),null!=o)for(let e in o)this.data.append(e,o[e])}else this.data=t}setHeaders(e){return this.headers=e,this}setCancelToken(e){return this.cancelSource=e.source,this}SetDefaultValue(e,t){void 0===this.options[e]&&(this.options[e]=t)}setHandleSendError(e){return this.options.OnError=e,this}Execute(){let t={};return null!=this.cancelSource&&(t.cancelToken=this.cancelSource.token),void 0!==this.headers&&(t.headers=this.headers),null!=this.options.Nonce&&this.data.append("_nonce",this.options.Nonce),null!=this.options.Prefix&&this.data.set("action",this.options.Prefix+"_"+this.data.get("action")),L.post(this.url,this.data,t).then((t=>{if(200!=t.status)return null!=this.options.OnError?(this.options.OnError("An unexpected error occurred, please try again"),null):(e.ToastService.SendErrorMessage("An unexpected error occurred, please try again"),null);if(t.data.success){let e=t.data.result;return void 0!==t.data.mappings&&(e=this.SerializeResult(t.data.result,t.data.mappings)),e}return null!=this.options.OnError?(this.options.OnError(t.data.errorMessage,t.data.detail),null):this.options.ReturnError?{success:!1,result:null,errorMessage:t.data.errorMessage}:(e.ToastService.SendErrorMessage(t.data.errorMessage),null)})).catch((t=>L.isCancel(t)&&null!=this.cancelSource?t:null!=this.options.OnError?(this.options.OnError("An unexpected error occurred, please try again"),null):(e.ToastService.SendErrorMessage("An unexpected error occurred, please try again"),null)))}ExecuteWithCancellation(e){return this.setCancelToken(e),this.Execute().then((e=>null==e?null:L.isCancel(e)?{wasCancelled:!0,result:null}:{wasCancelled:!1,result:e}))}SerializeResult(e,t){if(e instanceof Array){for(let r=0;r<e.length;r++)e[r]=this.SerializeItem(e[r],t);return e}return this.SerializeItem(e,t)}SerializeItem(e,t){if(null==e)return e;for(let r in t)switch(t[r]){case"json":void 0!==e[r]&&(e[r]=JSON.parse(e[r]))}return e}}class k{constructor(){}static Post(e,t=null,r,n){return new q(e,t,k.ajaxUrl,r,n).Execute()}static async CancellablePost(e,t={},r,n){return new q(e,t,k.ajaxUrl,n).ExecuteWithCancellation(r)}static SetGlobalVar(e){window.RNGlobalVar=e,k.ajaxUrl=e.ajaxurl}}exports.WpAjaxPost=k}));
