rndefine("#RNPBFormBlock",["#RNPBCore/EventManager","#RNPBRNPage/RNBlockBase.Options","#RNPBRNPage/RNBlockBase.Model","#RNPBCore/WpAjaxPost","lit","#RNPBCore/StoreBase","#RNPBPageBuilder/BlockBase.Options","#RNPBRNPage/RNBlockBase","lit/decorators","#RNPBLit/Lit"],(function(e,t,o,r,i,s,l,a,n,d){"use strict";class c extends o.RNBlockBaseModel{constructor(e,t){super(e,t),this.LoadedForm=new m}Render(){return i.html`<rnwppages-form-block .model="${this}"></rnwppages-form-block>`}async LoadForm(e){let t=await r.WpAjaxPost.Post("LoadForm",{FormId:e});null!=t&&(this.LoadedForm.FormId=e,this.LoadedForm.Content=t.Form,this.Refresh())}}class m{constructor(){this.FormId="",this.Content=""}}var p,u,h;let f=(p=s.StoreDataType(Object),u=class extends l.BlockBaseOptions{constructor(...e){super(...e),babelHelpers.initializerDefineProperty(this,"Src",h,this)}LoadDefaultValues(){super.LoadDefaultValues(),this.Src=null,this.Type=l.BlockTypeEnum.Form,this.Label="Form"}},h=babelHelpers.applyDecoratedDescriptor(u.prototype,"Src",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u);var B,g={};!function(e){Object.defineProperty(e,"__esModule",{value:!0});var t="spinner",o=[],r="f110",i="M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z";e.definition={prefix:"fas",iconName:t,icon:[512,512,o,r,i]},e.faSpinner=e.definition,e.prefix="fas",e.iconName=t,e.width=512,e.height=512,e.ligatures=o,e.unicode=r,e.svgPathData=i}(g);let F=n.customElement("rnwppages-form-block")(B=class extends a.RNBlockBase{constructor(...e){super(...e),this.IsLoading=!0}get SelectedFormId(){var e,t;return null===(e=this.model.Page.DefaultDataSources)||void 0===e||null===(t=e.Form)||void 0===t?void 0:t.OriginalId}SubRender(){return i.html` <div> ${d.rnIf(""!=this.model.Options.Label.trim()&&i.html`<label class='rnBlockLabel'>${this.model.Options.Label}</label>`)} <div style="max-height: 500px;overflow: auto"> <div style="position: relative;overflow: auto"> ${d.rnIf(null==this.SelectedFormId?i.html`<p>Please select a form first</p>`:this.GetForm())} <div style="position: absolute;top:0;left: 0;width: 100%;height: 100%;"/> ${this.IsLoading&&i.html` <div style="position:absolute;width: 100%;height: 100%;top:0;left: 0;font-size: 25px;display: flex;align-items: center;justify-content: center;flex-direction: column"> <rn-fontawesome .icon="${g.faSpinner}" .spin="${!0}"/> <span style="margin-right: 5px;">Loading Form</span> </div> `} </div> </div> </div> `}GetForm(){if(null==this.SelectedFormId||this.model.LoadedForm.FormId!=this.SelectedFormId)return i.html` <iframe @load=${e=>this.IFrameLoaded(e)} style="width: 100%;" sandbox={'allow-scripts allow-same-origin'} src=${rnBuilderVar.ajaxurl+"?action=rnpagebuilder_LoadForm&formid="+this.SelectedFormId}> </iframe> `}IFrameLoaded(e){let t=e.target;t.style.height=t.contentDocument.body.scrollHeight+"px",this.IsLoading=!1,this.forceUpdate()}})||B;e.EventManager.Subscribe("GetBlockModel",(e=>{if(e.Options.Type==t.BlockTypeEnum.Form)return new c(e.Options,e.Parent)})),e.EventManager.Subscribe("GetBlockOptions",(e=>{if(e.Name==t.BlockTypeEnum.Form)return new f})),exports.FormBlock=F,exports.FormBlockModel=c,exports.FormBlockOptions=f}));
