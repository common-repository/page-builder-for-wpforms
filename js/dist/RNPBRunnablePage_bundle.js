rndefine("#RNPBRunnablePage",["#RNPBCore/EventManager","#RNPBCore/WpAjaxPost"],(function(t,i){"use strict";exports.RunnablePage=class{constructor(t,e={}){this.Container=t,this.Options=e,this.Fields=[],null==this.Options&&(this.Options={}),this.Container.PageGenerator=this,i.WpAjaxPost.SetGlobalVar(this.Options)}async Initialize(){if(t.EventManager.Publish("InitializeDomProcessors",this),null!=this.Options.Fields){for(let i of this.Options.Fields){let e=t.EventManager.Publish("GetRunnable",i);if(null==e)throw Error("Field was not found "+i.Type);e.PageGenerator=this,this.Fields.push(e)}for(let t of this.Fields)await t.Initialize()}}Submit(t=null){if(null!=t){let i=this.Container.action,e=new URL(i);for(let i in t)""==t[i]?e.searchParams.delete(i):e.searchParams.set(i,t[i]);this.Container.action=e.toString(),this.Container.submit()}}},exports.RunnableBlockBase=class{constructor(t){this.Options=t,this.Container=null}async Initialize(){let t=0;return new Promise((i=>{let e=setInterval((()=>{if(t>=100)throw new Error("Could not initialize field "+this.Options.Type);t++;let n=".Block_"+this.Options.Id;""!=this.Options.Selector&&(n=this.Options.Selector+" "+n),this.Container=this.PageGenerator.Container.querySelector(n),null!=this.Container&&(clearInterval(e),i(!0))}),100)}))}}}));
